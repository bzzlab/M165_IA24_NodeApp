<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Movies Pagination</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>ðŸŽ¬ Movies Browser</h1>

  <!-- Suchfeld + Dropdown -->
  <form method="GET" action="/">
    <input type="text" name="search" value="<%= searchQuery %>" placeholder="Suche nach Titel, Jahr oder Genre">
    <select name="limit" onchange="this.form.submit()">
      <option value="5" <%= perPage == 5 ? "selected" : "" %>>5</option>
      <option value="10" <%= perPage == 10 ? "selected" : "" %>>10</option>
      <option value="20" <%= perPage == 20 ? "selected" : "" %>>20</option>
    </select>
    <button type="submit">Suchen</button>
  </form>

  <!-- Movie Tabelle -->
  <table border="1">
    <tr>
      <th>Title</th>
      <th>Year</th>
      <th>Genres</th>
    </tr>
    <% for (var i = 0; i < movies.length; i++) { %>
    <tr>
      <td><%= movies[i].title %></td>
      <td><%= movies[i].year %></td>
      <td><%= movies[i].genres ? movies[i].genres.join(", ") : "" %></td>
    </tr>
    <% } %>
  </table>

  <!-- Pagination -->
  <ul class="pagination">
    <% if (currentPage > 1) { %>
      <li><a href="/?page=1&limit=<%= perPage %>&search=<%= searchQuery %>">Â« Erste</a></li>
    <% } %>

    <% for (var i = 1; i <= pages; i++) { %>
      <li>
        <a href="/?page=<%= i %>&limit=<%= perPage %>&search=<%= searchQuery %>"
           class="<%= i === currentPage ? 'active' : '' %>"><%= i %></a>
      </li>
    <% } %>

    <% if (currentPage < pages) { %>
      <li><a href="/?page=<%= pages %>&limit=<%= perPage %>&search=<%= searchQuery %>">Letzte Â»</a></li>
    <% } %>
  </ul>
</body>
</html>
